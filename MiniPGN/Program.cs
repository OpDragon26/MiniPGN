using MiniPGN.Chess;
using MiniPGN.Minimizer;
using Type = MiniPGN.Minimizer.Type;

Init.Start();

byte[] byteFile = EncodingHandler.Active.Encode(new(Type.Standard, Metadata.Include, true, true)
{
    file =
    [
        "[Event \"Rated Blitz game\"]",
        "[Site \"https://lichess.org/n3p0bgc7\"]",
        "[Round \"1122\"]",
        "[White \"georgek\"]",
        "[Black \"TheWeebles\"]",
        "[Result \"1-0\"]",
        "[UTCDate \"2012.12.31\"]",
        "[UTCTime \"23:12:39\"]",
        "[WhiteElo \"1554\"]",
        "[BlackElo \"1429\"]",
        "[WhiteRatingDiff \"+7\"]",
        "[BlackRatingDiff \"-7\"]",
        "[ECO \"B01\"]",
        "[Opening \"Scandinavian Defense: Mieses-Kotroc Variation\"]",
        "[TimeControl \"300+2\"]",
        "[Termination \"Time forfeit\"]",
        "1. e4 e5 2. Ne2 d5 3. Nbc3 dxe4 4. Nxe4 Nc6 5. N4c3 e4 6. f3 exf3 7. Nd4 fxg2 8. Nb3 gxh1=N 9. Be2 Ng3 10. a3 Nf6 11. h3 Nfe4 12. a4 Ng5 13. a5 Nb4 14. a6 Nxa6 15. Ra2 Nc5 16. Ra3 Ng5e4"
    ]
});

Console.WriteLine(MiniPGN.Minimizer.Utils.ToString(byteFile));

EncodingHandler.Active.Decode([0x4D, 0x50, 0x47, 0x4E, 0x76, 0x30, 0x30, 0x2E, 0x30, 0x31, 0x53, 0x45, 0x01, 0x07, 0xEA, 0x01, 0x17, 0x08, 0x01, 0x2F, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xFF, 0xFF, 0x23, 0x24, 0xE2, 0x21, 0x1C, 0xF2, 0x08, 0x12, 0x23, 0xA3, 0x95, 0xEA, 0x23, 0x12, 0x23, 0x2A, 0x2A, 0x9B, 0x31, 0x8A, 0xC2, 0x37, 0xE3, 0x21, 0xB2, 0x02, 0xE2, 0x2D, 0x3A, 0xF2, 0x2D, 0x23, 0x03, 0xE2, 0x34, 0x04, 0xE2, 0x0B, 0x05, 0x85, 0xE4, 0x01, 0xE2, 0x14, 0x82, 0xFA, 0x34, 0x23, 0xFF]);